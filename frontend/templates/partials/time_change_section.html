<section class="card time-change-section" id="time-change-section">
  <div class="section-header">
    <div>
      <h2>Annonce Changement d'heure (Été / Hiver)</h2>
      <p class="playlist-subtitle">
        Alerte auto-générée basée sur les dates officielles (Internet).
      </p>
    </div>
  </div>
  <div class="section-content">
    <div class="time-change-stack">
      <!-- Statut -->
      <div class="birthday-panel">
        <div class="time-change-toggle-row">
          <h3>Statut</h3>
          <div class="time-change-toggle-control">
            <span class="time-change-toggle-text">Diapositive «&nbsp;Changement d'heure&nbsp;»</span>
            <label class="visibility-toggle">
              <span class="visibility-toggle-label visibility-toggle-label-on">Activée</span>
              <div class="visibility-toggle-switch">
                <input
                  id="time-change-enabled"
                  class="visibility-toggle-checkbox"
                  type="checkbox"
                  aria-label="Activer ou désactiver la diapositive Changement d'heure"
                />
                <span class="visibility-toggle-slider"></span>
              </div>
              <span class="visibility-toggle-label visibility-toggle-label-off">Désactivée</span>
            </label>
          </div>
        </div>
        <div class="form-row dual">
          <div>
            <label for="time-change-days-before">Afficher combien de jours avant</label>
            <input type="number" id="time-change-days-before" min="0" max="60" step="1" value="7" />
            <p class="field-hint">Par défaut 7 jours avant la date officielle.</p>
          </div>
          <div>
            <label for="time-change-duration">Durée (s)</label>
            <input type="number" id="time-change-duration" min="5" max="180" step="1" />
            <p class="field-hint">Temps d'affichage de la diapositive.</p>
          </div>
        </div>
      </div>

      <!-- Prochain changement d'heure -->
      <div class="birthday-panel time-change-next-card">
        <div class="time-change-next-header">
          <div>
            <h3 class="time-change-next-title">Prochain changement d'heure</h3>
            <p class="time-change-next-subtitle" id="time-change-next-subtitle">
              En attente des données officielles…
            </p>
          </div>
          <div class="time-change-next-actions">
            <button type="button" class="secondary-button" id="time-change-show-upcoming">Voir les 4 prochaines</button>
            <button type="button" class="secondary-button" id="time-change-refresh">Actualiser</button>
          </div>
        </div>
      <div id="time-change-upcoming-list" class="time-change-upcoming-list" hidden>
        <!-- Liste des 4 prochaines dates générée en JS -->
      </div>
    </div>

      {% include "partials/live_editor_section.html" %}

      <div class="birthday-panel time-change-actions">
        <div class="birthday-preview-actions">
          <button type="button" class="primary-button" id="time-change-save">Enregistrer</button>
          <span id="time-change-status" class="upload-feedback" aria-live="polite"></span>
        </div>
      </div>

      <!-- Textes (gérés par le live-editor, conteneur masqué pour compatibilité) -->
      <details class="birthday-panel collapsible time-change-text-panel" hidden aria-hidden="true">
        <summary>
          <div class="time-change-lines-header">
            <div>
              <p class="time-change-next-title">Textes affichés</p>
            </div>
          </div>
        </summary>
        <div class="birthday-variant-fields">
          <div id="time-change-text-list" class="time-change-lines-list birthday-text-list"></div>
          <div class="birthday-text-footer">
            <button type="button" class="secondary-button birthday-text-add" id="time-change-text-add">Ajouter un texte</button>
          </div>
          <template id="time-change-text-template"></template>
        </div>
      </details>
    </div>
  </div>
</section>
