<!DOCTYPE html>
<html lang="fr">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Cardinal TV • Gestion du diaporama</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='css/styles.css') }}" />
    <script>
      window.__browserCssConfig = window.__browserCssConfig || {};
      window.__browserCssConfig.silk = "{{ url_for('static', filename='css/silk.css') }}";
    </script>
    <script src="{{ url_for('static', filename='js/browser-css.js') }}"></script>
  </head>
  <body>
    <header class="page-header">
      <div class="brand">
        <img src="{{ url_for('static', filename='img/logo-1.png') }}" alt="Cardinal TV" class="brand-logo" />
      </div>
      <div class="header-controls">
        <div class="time-display" id="quebec-time" aria-live="polite"></div>
        <button id="settings-button" class="secondary-button">Configurer la bande</button>
        <button id="slideshow-button" class="primary-button">
          Lancer le mode Diaporama
        </button>
      </div>
    </header>

    <main class="layout">
      <section class="card upload-card">
        <div class="section-header">
          <div>
            <h2>Téléversement</h2>
            <p class="playlist-subtitle">Ajoutez des fichiers à la playlist en un seul geste.</p>
          </div>
        </div>

        <form id="upload-form" class="upload-inline">
          <label for="file-input" id="drop-zone">
            <span class="drop-zone-title">Cliquez ou déposez vos fichiers ici</span>
            <span class="drop-zone-subtitle">
              Images, vidéos, PDF, documents et autres formats sont acceptés.
            </span>
          </label>
          <input id="file-input" name="files" type="file" multiple />
          <div class="actions upload-actions">
            <button type="submit" class="primary-button">Téléverser</button>
            <span id="upload-feedback" role="status" aria-live="polite"></span>
          </div>
        </form>
      </section>

      <section class="card playlist-card">
        <div class="section-header playlist-header">
          <div>
            <h2>Playlist des médias</h2>
            <p class="playlist-subtitle">
              Organisez vos médias et ajustez leurs paramètres d’affichage.
            </p>
          </div>
          <div class="header-actions">
            <button id="refresh-button" class="secondary-button">Actualiser</button>
          </div>
        </div>

        <div id="media-list" class="media-list" aria-live="polite">
          <div class="empty-state">
            Aucun média pour le moment. Téléversez des fichiers pour construire la playlist.
          </div>
        </div>
      </section>
    </main>

    <div id="settings-modal" class="modal hidden" aria-hidden="true">
      <div class="modal-backdrop" data-modal-close></div>
      <div class="modal-dialog" role="dialog" aria-modal="true" aria-labelledby="overlay-modal-title">
        <header class="modal-header">
          <h2 id="overlay-modal-title">Paramètres de la bande d'information</h2>
          <button class="icon-button close-button" type="button" data-modal-close aria-label="Fermer">×</button>
        </header>
        <form id="overlay-form" class="modal-body">
          <section class="modal-section">
            <label class="toggle">
              <input type="checkbox" id="overlay-enabled" />
              Activer la bande
            </label>
            <label class="field-group">
              <span>Mode d'affichage</span>
              <select id="overlay-mode">
                <option value="clock">Date et heure</option>
                <option value="ticker">Texte défilant</option>
              </select>
            </label>
            <div class="field-inline">
              <label class="field-group">
                <span>Hauteur (% écran)</span>
                <input type="range" id="overlay-height" min="3" max="15" step="0.5" />
              </label>
              <span id="overlay-height-value" class="range-value">5</span>
            </div>
          </section>

          <section class="modal-section">
            <label class="field-group">
              <span>Couleur de fond</span>
              <input type="color" id="overlay-bg" value="#f0f0f0" />
            </label>
            <label class="field-group">
              <span>Couleur du texte</span>
              <input type="color" id="overlay-text" value="#111111" />
            </label>
            <label class="field-group">
              <span>Logo (chemin ou URL)</span>
              <input type="text" id="overlay-logo" placeholder="static/img/logo-groupe-cardinal.png" />
            </label>
          </section>

          <section class="modal-section ticker-only hidden">
            <label class="field-group">
              <span>Texte défilant</span>
              <textarea id="overlay-ticker-text" rows="3" placeholder="Votre message d'information"></textarea>
            </label>
          </section>

          <footer class="modal-footer">
            <button type="button" class="secondary-button" data-modal-close>Annuler</button>
            <button type="submit" class="primary-button">Enregistrer</button>
          </footer>
        </form>
      </div>
    </div>

    <footer class="page-footer">
      <small>Serveur local sur le port 39010 — Cardinal TV</small>
    </footer>

    <script type="module" src="{{ url_for('static', filename='js/app.js') }}"></script>
  </body>
</html>
